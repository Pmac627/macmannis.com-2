/*!
 * jQuery UI Widget @VERSION
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
function Matrix(){}(function(e,t){var n=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n=0,i;(i=t[n])!=null;n++)e(i).triggerHandler("remove");r(t)},e.widget=function(t,r,i){var s=t.split(".")[0],o;t=t.split(".")[1],o=s+"-"+t,i||(i=r,r=e.Widget),e.expr[":"][o]=function(n){return!!e.data(n,t)},e[s]=e[s]||{},e[s][t]=e.extend(function(n,r){if(!this._createWidget)return new e[s][t](n,r);arguments.length&&this._createWidget(n,r)},e[s][t],{version:i.version});var u=new r;u.options=e.widget.extend({},u.options),e.each(i,function(t,s){e.isFunction(s)&&(i[t]=function(){var e=function(e){return r.prototype[e].apply(this,n.call(arguments,1))},t=function(e,t){return r.prototype[e].apply(this,t)};return function(){var n=this._super,r=this._superApply,i;return this._super=e,this._superApply=t,i=s.apply(this,arguments),this._super=n,this._superApply=r,i}}())}),e[s][t].prototype=e.widget.extend(u,{namespace:s,widgetName:t,widgetEventPrefix:t,widgetBaseClass:o},i),e.widget.bridge(t,e[s][t])},e.widget.extend=function(r){var i=n.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(r[u]=e.isPlainObject(a)?e.widget.extend({},r[u],a):a);return r},e.widget.bridge=function(r,i){e.fn[r]=function(s){var o=typeof s=="string",u=n.call(arguments,1),a=this;return s=!o&&u.length?e.widget.extend.apply(null,[s].concat(u)):s,o?this.each(function(){var n=e.data(this,r);if(!n)return e.error("cannot call methods on "+r+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(n[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+r+" widget instance");var i=n[s].apply(n,u);if(i!==n&&i!==t)return a=i&&i.jquery?a.pushStack(i.get()):i,!1}):this.each(function(){var t=e.data(this,r);t?t.option(s||{})._init():i(s,this)}),a}},e.Widget=function(t,n){if(!this._createWidget)return new e[namespace][name](t,n);arguments.length&&this._createWidget(t,n)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetName,this),this._bind({remove:"destroy"})),this._create(),this._trigger("create"),this._init()},_getCreateOptions:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled"),this.bindings.unbind("."+this.widgetName),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetBaseClass+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_bind:function(t,n){n?(t=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element);var r=this;e.each(n,function(n,i){t.bind(n+"."+r.widgetName,function(){if(r.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof i=="string"?r[i]:i).apply(r,arguments)})})},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._bind(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._bind(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i=this.options[t],s;n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),r=r||{};if(n.originalEvent)for(var o=e.event.props.length,u;o;)u=e.event.props[--o],n[u]=n.originalEvent[u];return this.element.trigger(n,r),s=e.isArray(r)?[n].concat(r):[n,r],!(e.isFunction(i)&&i.apply(this.element[0],s)===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery),function(){var e,t;$.fn.bindFirst=function(e,t){var n;return e=e.split(" "),n=e.length,this.each(function(){var r;while(n--)$(this).bind(e[n],t),r=$.data(this,"events")[e[n]],r.splice(0,0,r.pop())})},t={},this.loadImage=function(e,n){var r,i,s;n==null&&(n={});if(e==null)return;return r=(s=n.complete)!=null?s:function(){},t[e]!=null?r(e,t[e],!0):(i=new Image,i.onload=function(){return r(e,this),t[e]=this},i.src=e)},$.fn.loadImage=function(e){var t,n,r,i,s,o,u,a;return e==null&&(e={}),r=(s=e.complete)!=null?s:function(){},t=(o=e.dataAttr)!=null?o:"image",n=(u=e.loadedClass)!=null?u:"loaded",i=(a=e.replace)!=null?a:!1,this.each(function(){var s,o;return s=$(this),o=s.data(t),e.complete=function(e,t,o){var u,a,f=this;return i?o||(s.css({display:"none"}),a=$(t).addClass(n),a.wrapAll("<div class='small'><div class='inner' /></div>"),u=a.closest(".small"),u.css({width:t.width,height:t.height}),s.after(u)):s.css({"background-image":"url("+e+")"}).addClass(n),setTimeout(function(){return r(e,f)},1)},loadImage(o,e)})},e=[],$.preLoad=function(){var t,n,r,i;t=arguments.length,r=t,i=[];while(r--)n=document.createElement("img"),n.src=arguments[r],i.push(e.push(n));return i},$.widget("metalab.loopedList",{options:{itemSelector:"li",containerSelector:".container",nextSelector:".next",pagingSelector:".dots li",pagingActiveClass:"active",activeClass:"active",loop:!0,auto:!1,keyboard:!1},currentIndex:0,_create:function(){var e=this;typeof this._setupDOM=="function"&&this._setupDOM(),this._setupElems(),this._setupPaging(),this.$paging.each(function(e){return $.data(this,"index",e)}),this._setupNext(),this._bindPaging(),this._bindNext(),this._bind(this.element,{play:"play",pause:"pause"});if(this.options.keyboard)return $(document).bindFirst("keydown",function(t){return e._keydown(t)}),$(document).bindFirst("keyup",function(t){return e._keyup(t)})},_setupElems:function(){return this.$elems=this.element.find(this.options.itemSelector)},_setupPaging:function(){return this.$paging=this.element.find(this.options.pagingSelector)},_bindPaging:function(){return this._bind(this.$paging,{mousedown:"_pagingClick"})},_setupNext:function(){return this.$nextButton=this.element.find(this.options.nextSelector)},_bindNext:function(){return this._bind(this.$nextButton,{mousedown:"_nextClick"})},_pagingClick:function(e,t){if($(e.target).hasClass("active"))return;return e.preventDefault(),this.showIndex($(e.target).data("index"))},_nextClick:function(e,t){return e.preventDefault(),this.showNext()},_keydown:function(e){if(!this.active)return e;if(e.keyCode===39)return e.preventDefault();if(e.keyCode===37)return e.preventDefault()},_keyup:function(e){if(!this.active)return e;if(e.keyCode===39)return e.preventDefault(),this.showNext();if(e.keyCode===37)return e.preventDefault(),this.showPrevious()},active:!0,play:function(){var e=this;this.active=!0;if(this.options.auto)return this.interval=setInterval(function(){return e.showNext()},this.options.auto)},pause:function(){this.active=!1;if(this.interval!=null)return clearInterval(this.interval)},restartTimer:function(){return this.pause(),this.play()},length:function(){return this.$elems.length},currentElem:function(){return $(this.$elems[this.currentIndex])},showPrevious:function(){return this.moveTo(this.currentIndex-1)},showNext:function(){return this.moveTo(this.currentIndex+1)},moveTo:function(e){if(e>this.$elems.length-1){if(!this.options.loop)return!1;e=0}if(e<0){if(!this.options.loop)return!1;e=this.$elems.length-1}return this.showIndex(e)},showIndex:function(e){this.$paging.removeClass(this.options.pagingActiveClass);if(this.$paging.length)return this.$paging.eq(e).addClass(this.options.pagingActiveClass)},showSpinner:function(){return this.spinnerTimeout=setTimeout(function(){return $(".spinner").addClass("on")},200)},hideSpinner:function(){return this.spinnerTimeout&&clearTimeout(this.spinnerTimeout),$(".spinner").removeClass("on")},preloadNextFewSmall:function(e){var t,n,r,i;n=e+3,t=$(".list-container .screenshot"),r=t.length,i=[];while(e<r&&e<n)jQuery.preLoad(t.eq(e).attr("data-image")),i.push(++e);return i},preloadNextBig:function(e,t){var n,r,i,s;r=e+1,n=$(".list-container .screenshot"),i=n.length,s=[];while(e<i&&e<r)jQuery.preLoad(n.eq(e).attr("data-image-big")),s.push(++e);return s}})}.call(this),$.easing.jswing=$.easing.swing,$.extend($.easing,{def:"easeOutQuad",swing:function(e,t,n,r,i){return $.easing[$.easing.def](e,t,n,r,i)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=i*.3,u=r;return t==0?n:(t/=i)==1?n+r:(u<Math.abs(r)?(u=r,s=o/4):s=o/(2*Math.PI)*Math.asin(r/u),-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n)},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=i*.3,u=r;return t==0?n:(t/=i)==1?n+r:(u<Math.abs(r)?(u=r,s=o/4):s=o/(2*Math.PI)*Math.asin(r/u),u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n)},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=i*.3*1.5,u=r;return t==0?n:(t/=i/2)==2?n+r:(u<Math.abs(r)?(u=r,s=o/4):s=o/(2*Math.PI)*Math.asin(r/u),t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n)},easeInBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*(t/=i)*t*((s+1)*t-s)+n},easeOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),r*((t=t/i-1)*t*((s+1)*t+s)+1)+n},easeInOutBack:function(e,t,n,r,i,s){return s==undefined&&(s=1.70158),(t/=i/2)<1?r/2*t*t*(((s*=1.525)+1)*t-s)+n:r/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+n},easeInBounce:function(e,t,n,r,i){return r-$.easing.easeOutBounce(e,i-t,0,r,i)+n},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,r,i){return t<i/2?$.easing.easeInBounce(e,t*2,0,r,i)*.5+n:$.easing.easeOutBounce(e,t*2-i,0,r,i)*.5+r*.5+n}});var Sylvester={version:"0.1.3",precision:1e-6};Matrix.prototype={e:function(e,t){return e<1||e>this.elements.length||t<1||t>this.elements[0].length?null:this.elements[e-1][t-1]},map:function(e){var t=[],n=this.elements.length,r=n,i,s,o=this.elements[0].length,u;do{i=r-n,s=o,t[i]=[];do u=o-s,t[i][u]=e(this.elements[i][u],i+1,u+1);while(--s)}while(--n);return Matrix.create(t)},multiply:function(e){if(!e.elements)return this.map(function(t){return t*e});var t=e.modulus?!0:!1,n=e.elements||e;typeof n[0][0]=="undefined"&&(n=Matrix.create(n).elements);if(!this.canMultiplyFromLeft(n))return null;var r=this.elements.length,i=r,s,o,u=n[0].length,a,f=this.elements[0].length,l=[],c,h,p;do{s=i-r,l[s]=[],o=u;do{a=u-o,c=0,h=f;do p=f-h,c+=this.elements[s][p]*n[p][a];while(--h);l[s][a]=c}while(--o)}while(--r);var n=Matrix.create(l);return t?n.col(1):n},x:function(e){return this.multiply(e)},canMultiplyFromLeft:function(e){var t=e.elements||e;return typeof t[0][0]=="undefined"&&(t=Matrix.create(t).elements),this.elements[0].length==t.length},setElements:function(e){var t,n=e.elements||e;if(typeof n[0][0]!="undefined"){var r=n.length,i=r,s,o,u;this.elements=[];do{t=i-r,s=n[t].length,o=s,this.elements[t]=[];do u=o-s,this.elements[t][u]=n[t][u];while(--s)}while(--r);return this}var a=n.length,f=a;this.elements=[];do t=f-a,this.elements.push([n[t]]);while(--a);return this}},Matrix.create=function(e){var t=new Matrix;return t.setElements(e)},$M=Matrix.create,function(e){if(!e.cssHooks)throw"jQuery 1.4.3+ is needed for this plugin to work";var t="",n="transform",r,i,o,u,a,f=n.charAt(0).toUpperCase()+n.slice(1),l=["Moz","Webkit","O","ms"],c=document.createElement("div");if(n in c.style)i=n,o=c.style.perspective!==undefined;else for(var h=0;h<l.length;h++){r=l[h]+f;if(r in c.style){i=r,l[h]==="Moz"&&(t="px"),l[h]+"Perspective"in c.style?o=!0:u=!0;break}}/Chrome\/13/.test(navigator.userAgent)&&(o=!1,u=!0),i||(a="filter"in c.style,i="filter"),c=null,e.support[n]=i;var p=i,d={rotateX:{defaultValue:0,matrix:function(e){return o?$M([[1,0,0,0],[0,Math.cos(e),Math.sin(-e),0],[0,Math.sin(e),Math.cos(e),0],[0,0,0,1]]):$M([[1,0,0],[0,1,0],[0,0,1]])}},rotateY:{defaultValue:0,matrix:function(e){return o?$M([[Math.cos(e),0,Math.sin(e),0],[0,1,0,0],[Math.sin(-e),0,Math.cos(e),0],[0,0,0,1]]):$M([[1,0,0],[0,1,0],[0,0,1]])}},rotateZ:{defaultValue:0,matrix:function(e){return o?$M([[Math.cos(e),Math.sin(-e),0,0],[Math.sin(e),Math.cos(e),0,0],[0,0,1,0],[0,0,0,1]]):$M([[Math.cos(e),Math.sin(-e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]])}},scale:{defaultValue:1,matrix:function(e){return o?$M([[e,0,0,0],[0,e,0,0],[0,0,e,0],[0,0,0,1]]):$M([[e,0,0],[0,e,0],[0,0,1]])}},translateX:{defaultValue:0,matrix:function(e){return o?$M([[1,0,0,0],[0,1,0,0],[0,0,1,0],[e,0,0,1]]):$M([[1,0,0],[0,1,0],[e,0,1]])}},translateY:{defaultValue:0,matrix:function(e){return o?$M([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,e,0,1]]):$M([[1,0,0],[0,1,0],[0,e,1]])}},translateZ:{defaultValue:0,matrix:function(e){return o?$M([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,e,1]]):$M([[1,0,0],[0,1,0],[0,0,1]])}}},v=function(n){var r=e(n).data("transforms"),i;o?i=$M([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]):i=$M([[1,0,0],[0,1,0],[0,0,1]]);for(var f in d)i=i.x(d[f].matrix(r[f]||d[f].defaultValue));o?(s="matrix3d(",s+=i.e(1,1).toFixed(10)+","+i.e(1,2).toFixed(10)+","+i.e(1,3).toFixed(10)+","+i.e(1,4).toFixed(10)+",",s+=i.e(2,1).toFixed(10)+","+i.e(2,2).toFixed(10)+","+i.e(2,3).toFixed(10)+","+i.e(2,4).toFixed(10)+",",s+=i.e(3,1).toFixed(10)+","+i.e(3,2).toFixed(10)+","+i.e(3,3).toFixed(10)+","+i.e(3,4).toFixed(10)+",",s+=i.e(4,1).toFixed(10)+","+i.e(4,2).toFixed(10)+","+i.e(4,3).toFixed(10)+","+i.e(4,4).toFixed(10),s+=")"):u?(s="matrix(",s+=i.e(1,1).toFixed(10)+","+i.e(1,2).toFixed(10)+",",s+=i.e(2,1).toFixed(10)+","+i.e(2,2).toFixed(10)+",",s+=i.e(3,1).toFixed(10)+t+","+i.e(3,2).toFixed(10)+t,s+=")"):a&&(s="progid:DXImageTransform.Microsoft.",s+="Matrix(",s+="M11="+i.e(1,1).toFixed(10)+",",s+="M12="+i.e(1,2).toFixed(10)+",",s+="M21="+i.e(2,1).toFixed(10)+",",s+="M22="+i.e(2,2).toFixed(10)+",",s+="SizingMethod='auto expand'",s+=")",n.style.top=i.e(3,1),n.style.left=i.e(3,2)),n.style[p]=s},m=function(t){return e.fx.step[t]=function(n){e.cssHooks[t].set(n.elem,n.now+n.unit)},{get:function(n,r,i){var s=e(n).data("transforms");return s===undefined&&(s={},e(n).data("transforms",s)),s[t]||d[t].defaultValue},set:function(n,r){var i=e(n).data("transforms");i===undefined&&(i={});var s=d[t];typeof s.apply=="function"?i[t]=s.apply(i[t]||s.defaultValue,r):i[t]=r,e(n).data("transforms",i),v(n)}}};if(p)for(var g in d)e.cssHooks[g]=m(g),e.cssNumber[g]=!0;e.fn.clearMatrix=function(){return this.each(function(){this.style[p]="none"})}}(jQuery),function(){$.widget("metalab.fullscreenViewer",$.metalab.loopedList,{widgetClass:"fullscreen_viewer",options:{overlayId:"fullscreen",navId:"fullscreen_nav",bodyFullscreenClass:"fullscreen",titleContainerSelector:".title",titlesSelector:".screenshot-title",linkedController:null},_create:function(){var e=this;return this.$overlay=$("<div id='"+this.options.overlayId+"' />").appendTo(document.body),this.$nav=$("<div id='"+this.options.navId+"'><div class='container' /></div>").appendTo(document.body),this.$nav.find(".container").append($("#nav_template").html()),this.$titleContainer=this.$nav.find(this.options.titleContainerSelector),this.$titleElems=this.$titleContainer.find(this.options.titlesSelector),this.$overlay.click(function(t){return e.hide()}),$(".full").live("click",function(){return e.hide()}),this._super("_create")},_setupElems:function(){return this.$elems=this.options.$elems},_setupPaging:function(){return this.$paging=this.$nav.find(this.options.pagingSelector)},_setupNext:function(){return this.$nextButton=this.$nav.find(this.options.nextSelector)},isVisible:!1,isAnimating:!1,titleDuration:400,_prepLargeSize:function(e,t,n){var r,i=this;return r=$(e).closest(".small").siblings(".full"),r.length?n(r,r.data()):(this.showSpinner(),loadImage(t,{complete:function(t,r){var s,o,u,a,f,l,c;return i.hideSpinner(),c=e.width/r.width,l=958-r.width,a=-Math.ceil((r.height-r.height*c)/2-24),o=l/2-1,f=$(document.createElement("div")).addClass("inner").append(r),s=$(document.createElement("div")).addClass("full").append(f),$(e).closest(".screenshot-container").hasClass("iphone")&&(o-=78),u={zoomRatio:c,zoomOffset:l,topOffset:a,leftOffset:o},s.data(u),s.css({left:u.leftOffset,top:u.topOffset,display:"none"}),n(s,u)}}))},showIndex:function(e){var t,n,r,i=this;return this.isAnimating?!1:(r=$(this.$elems[e]),n=r.find(".screenshot"),t=n.data("image-big"),this.showSpinner(),n.loadImage({replace:!0,complete:function(){var n;return i.hideSpinner(),n=r.find("img"),i._prepLargeSize(n[0],t,function(t,n){var s,o,u;t[0].parentNode||r.append(t);if(i.isVisible){if(e===i.currentIndex)return!1;i.isAnimating=!0,t.css({top:0,left:n.zoomOffset/2-1,display:"block"}),t.clearMatrix(),(u=i.options.linkedController)!=null&&u.screenshots("showIndex",e,"slide",function(){return i.isAnimating=!1})}else $(document.body).addClass(i.options.bodyFullscreenClass),t.css({top:n.topOffset,scale:n.zoomRatio,display:"block"}),setTimeout(function(){return i.isAnimating=!0,t.animate({top:0,scale:1,left:n.zoomOffset/2-1},300,"easeOutQuad",function(){return t.clearMatrix(),i.isAnimating=!1,i.isVisible=!0})},15);return o=$(i.$titleElems[e]),s=$(i.$titleElems[i.currentIndex]),s.animate({opacity:0},i.titleDuration/2,"linear",function(){return setTimeout(function(){return o.animate({opacity:1},i.titleDuration/2,"linear")},10)}),i.currentIndex=e,i.preloadNextBig(e+1)})}}),this._super("showIndex",e,"slide"))},_titleElemFromTop:function(e){return e*this.$titleElems.first().height()},_keyup:function(e){return this.isVisible?(e.stopImmediatePropagation(),e.keyCode===27?(e.preventDefault(),this.hide()):this._super("_keyup",e)):e},hide:function(e){var t,n,r,i,s=this;if(!this.isVisible)return;return i=$(this.$elems[this.currentIndex]),n=i.find(".small, .full"),r=$(n[0]),t=$(n[1]),setTimeout(function(){return Modernizr.csstransforms&&t.animate({top:t.data("topOffset"),scale:t.data("zoomRatio"),left:t.data("leftOffset")},300,"easeInOutQuad",function(){return $(".screenshot-container .full").hide(),t.clearMatrix()}),setTimeout(function(){return $(document.body).removeClass(s.options.bodyFullscreenClass),s.isVisible=!1},300)},1)}})}.call(this),function(){$.widget("metalab.screenshots",$.metalab.loopedList,{widgetClass:"screenshots",options:{screenshotSelector:".screenshot",titleContainerSelector:".title",titlesSelector:".screenshot-title"},completedLoadingAnimation:!1,isAnimating:!1,_create:function(){var e=this;return this._super("_create"),this.$titleContainer=this.element.find(this.options.titleContainerSelector),this.$titleElems=this.$titleContainer.find(this.options.titlesSelector),this.$container=this.element.find(this.options.containerSelector),Modernizr.csstransitions&&(this.$fullscreen=$("<div />").appendTo(document.body),this.$fullscreen.fullscreenViewer({linkedController:this.element,$elems:this.$elems,keyboard:this.options.keyboard}),this.$container.click(function(t){var n;return t.preventDefault(),n=e.$fullscreen.data("fullscreenViewer"),n.isVisible?n.hide():n.showIndex(e.currentIndex)})),this.showIndex(this.currentIndex),this.play()},showIndex:function(e,t,n){var r,i=this;t==null&&(t="pop");if(this.isAnimating)return;return this.completedLoadingAnimation&&this.showSpinner(),this.isAnimating=!0,r=$(this.$elems[e]).find(this.options.screenshotSelector),r.loadImage({replace:!0,complete:function(){return i.hideSpinner(),i._animateTo(e,t,n)}}),this._super("showIndex",e,t,n)},_elemFromLeft:function(e){return e*this.$elems.first().width()},_pagingClick:function(e,t){return this._super("_pagingClick",e,t),this.restartTimer()},_nextClick:function(e,t){return this._super("_nextClick",e,t),this.restartTimer()},introDuration:400,titleDuration:400,nextDuration:400,_animateTo:function(e,t,n){var r,i,s,o=this;return t==null&&(t="pop"),this.$elems.removeClass(this.options.activeClass),r=$(this.$elems[e]).addClass(this.options.activeClass),t==="pop"?this._animateToPop(e,r,n):this._animateToSlide(e,r,n),s=$(this.$titleElems[e]),i=$(this.$titleElems[this.currentIndex]),i.animate({opacity:0},this.titleDuration,"linear",function(){return setTimeout(function(){return o.$titleElems.stop().css({opacity:0}),s.animate({opacity:1},o.titleDuration)},10)}),this.completedLoadingAnimation||(this.completedLoadingAnimation=!0,Modernizr.csstransforms?this._animateIntroWithCSS(r,this.introDuration,function(){return o.isAnimating=!1}):r.animate({"margin-top":0},this.introDuration,"linear",function(){return o.isAnimating=!1})),this.currentIndex=e,this.preloadNextFewSmall(e),this.preloadNextBig(e)},_animateIntroWithCSS:function(e,t,n){return e.css({translateY:388,opacity:0}),setTimeout(function(){return e.animate({translateY:0,opacity:1},t,"easeInOutQuad",function(){return e.clearMatrix(),typeof n=="function"?n():void 0})},25)},_animateToPop:function(e,t,n){var r,i=this;if(!this.completedLoadingAnimation)return;return Modernizr.csstransforms?(r=this.currentElem(),r.css({"z-index":10}),t.find(".small .inner").css({height:388}),t.css({translateX:0,scale:1,"z-index":1,opacity:1}),r.animate({opacity:0,scale:1.5},this.nextDuration,"easeInOutQuad",function(){return i.isAnimating=!1,r.removeAttr("style"),typeof n=="function"?n():void 0})):this._animateToSlide(e,t),this},_animateToSlide:function(e,t,n){var r,i,s=this;if(!this.completedLoadingAnimation)return;return Modernizr.csstransforms?(r=this.currentElem(),i=e>this.currentIndex?1:-1,t.css({translateX:998*i,opacity:0,scale:1}),this._animateNextSlideWithCSS(r,t,i,this.nextDuration,function(){return s.isAnimating=!1,typeof n=="function"?n():void 0})):this.$container.animate({left:-this._elemFromLeft(e)},{duration:this.nextDuration,complete:function(){return s.isAnimating=!1}}),this},_animateNextSlideWithCSS:function(e,t,n,r,i){return e.animate({translateX:-998*n,opacity:0},r,"easeInOutQuad",function(){return e.removeAttr("style")}),t.animate({translateX:0,opacity:1},r,"easeInOutQuad",function(){return t.clearMatrix(),typeof i=="function"?i():void 0})}})}.call(this),function(){var e;$(window).load(function(){return $("#clients").screenshots({itemSelector:".screenshot-container",containerSelector:".list-container",loop:!0,keyboard:!0})})}.call(this);